2020-10-04 16:10:15.023807: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library cudart64_100.dll
============================= test session starts =============================
platform win32 -- Python 3.6.12, pytest-6.0.2, py-1.9.0, pluggy-0.13.1
rootdir: C:\Users\mutation\Desktop\testcase\tests\keras\utils
plugins: flaky-3.7.0
collected 13 items

data_utils_test.py FE............                                        [100%]

=================================== ERRORS ====================================
____________________ ERROR at teardown of test_data_utils _____________________

tmpdir = local('C:\\Users\\mutation\\AppData\\Local\\Temp\\pytest-of-mutation\\pytest-299\\test_data_utils0')

    @pytest.fixture
    def in_tmpdir(tmpdir):
        """Runs a function in a temporary directory.
    
        Checks that the directory is empty afterwards.
        """
        with tmpdir.as_cwd():
            yield None
>       assert not tmpdir.listdir()
E       AssertionError: assert not [local('C:\\Users\\mutation\\AppData\\Local\\Temp\\pytest-of-mutation\\pytest-299\\test_data_utils0\\test.txt'), local('C:\\Users\\mutation\\AppData\\Local\\Temp\\pytest-of-mutation\\pytest-299\\test_data_utils0\\test.zip')]
E        +  where [local('C:\\Users\\mutation\\AppData\\Local\\Temp\\pytest-of-mutation\\pytest-299\\test_data_utils0\\test.txt'), local('C:\\Users\\mutation\\AppData\\Local\\Temp\\pytest-of-mutation\\pytest-299\\test_data_utils0\\test.zip')] = <bound method LocalPath.listdir of local('C:\\Users\\mutation\\AppData\\Local\\Temp\\pytest-of-mutation\\pytest-299\\test_data_utils0')>()
E        +    where <bound method LocalPath.listdir of local('C:\\Users\\mutation\\AppData\\Local\\Temp\\pytest-of-mutation\\pytest-299\\test_data_utils0')> = local('C:\\Users\\mutation\\AppData\\Local\\Temp\\pytest-of-mutation\\pytest-299\\test_data_utils0').listdir

data_utils_test.py:70: AssertionError
---------------------------- Captured stdout call -----------------------------
Downloading data from file:///C:/Users/mutation/AppData/Local/Temp/pytest-of-mutation/pytest-299/test_data_utils0/test.tar.gz

8192/149 [=================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================] - 0s 0us/step
Downloading data from file:///C:/Users/mutation/AppData/Local/Temp/pytest-of-mutation/pytest-299/test_data_utils0/test.tar.gz

8192/149 [=================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================] - 0s 0us/step
Downloading data from file:///C:/Users/mutation/AppData/Local/Temp/pytest-of-mutation/pytest-299/test_data_utils0/test.tar.gz

8192/149 [=================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================] - 0s 0us/step
Downloading data from file:///C:/Users/mutation/AppData/Local/Temp/pytest-of-mutation/pytest-299/test_data_utils0/test.zip

8192/155 [=================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================] - 0s 0us/step
---------------------------- Captured stderr call -----------------------------
Using TensorFlow backend.
Using TensorFlow backend.
================================== FAILURES ===================================
_______________________________ test_data_utils _______________________________

in_tmpdir = None

    def test_data_utils(in_tmpdir):
        """Tests get_file from a url, plus extraction and validation.
        """
        dirname = 'data_utils'
    
        with open('test.txt', 'w') as text_file:
            text_file.write('Float like a butterfly, sting like a bee.')
    
        with tarfile.open('test.tar.gz', 'w:gz') as tar_file:
            tar_file.add('test.txt')
    
        with zipfile.ZipFile('test.zip', 'w') as zip_file:
            zip_file.write('test.txt')
    
        origin = urljoin('file://', pathname2url(os.path.abspath('test.tar.gz')))
    
        path = get_file(dirname, origin, untar=True)
        filepath = path + '.tar.gz'
        data_keras_home = os.path.dirname(os.path.dirname(os.path.abspath(filepath)))
        assert data_keras_home == os.path.dirname(load_backend._config_path)
        os.remove(filepath)
    
        _keras_home = os.path.join(os.path.abspath('.'), '.keras')
        if not os.path.exists(_keras_home):
            os.makedirs(_keras_home)
        os.environ['KERAS_HOME'] = _keras_home
        reload_module(load_backend)
        path = get_file(dirname, origin, untar=True)
        filepath = path + '.tar.gz'
        data_keras_home = os.path.dirname(os.path.dirname(os.path.abspath(filepath)))
        assert data_keras_home == os.path.dirname(load_backend._config_path)
        os.environ.pop('KERAS_HOME')
        shutil.rmtree(_keras_home)
        reload_module(load_backend)
    
        path = get_file(dirname, origin, untar=True)
        filepath = path + '.tar.gz'
        hashval_sha256 = _hash_file(filepath)
        hashval_md5 = _hash_file(filepath, algorithm='md5')
        path = get_file(dirname, origin, md5_hash=hashval_md5, untar=True)
        path = get_file(filepath, origin, file_hash=hashval_sha256, extract=True)
        assert os.path.exists(filepath)
        assert validate_file(filepath, hashval_sha256)
        assert validate_file(filepath, hashval_md5)
        os.remove(filepath)
        os.remove('test.tar.gz')
    
        origin = urljoin('file://', pathname2url(os.path.abspath('test.zip')))
    
        hashval_sha256 = _hash_file('test.zip')
        hashval_md5 = _hash_file('test.zip', algorithm='md5')
        path = get_file(dirname, origin, md5_hash=hashval_md5, extract=True)
        path = get_file(dirname, origin, file_hash=hashval_sha256, extract=True)
        assert os.path.exists(path)
        assert validate_file(path, hashval_sha256)
        assert validate_file(path, hashval_md5)
    
        os.remove(path)
>       os.remove(os.path.join(os.path.dirname(path), 'test.txt'))
E       FileNotFoundError: [WinError 2] 系统找不到指定的文件。: 'C:\\Users\\mutation\\.keras\\datasets\\test.txt'

C:\Users\mutation\Desktop\testcase\tests\keras\utils\data_utils_test.py:131: FileNotFoundError
---------------------------- Captured stdout call -----------------------------
Downloading data from file:///C:/Users/mutation/AppData/Local/Temp/pytest-of-mutation/pytest-299/test_data_utils0/test.tar.gz

8192/149 [=================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================] - 0s 0us/step
Downloading data from file:///C:/Users/mutation/AppData/Local/Temp/pytest-of-mutation/pytest-299/test_data_utils0/test.tar.gz

8192/149 [=================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================] - 0s 0us/step
Downloading data from file:///C:/Users/mutation/AppData/Local/Temp/pytest-of-mutation/pytest-299/test_data_utils0/test.tar.gz

8192/149 [=================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================] - 0s 0us/step
Downloading data from file:///C:/Users/mutation/AppData/Local/Temp/pytest-of-mutation/pytest-299/test_data_utils0/test.zip

8192/155 [=================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================] - 0s 0us/stepUsing TensorFlow backend.

---------------------------- Captured stderr call -----------------------------
Using TensorFlow backend.
Using TensorFlow backend.
============================== warnings summary ===============================
C:\ProgramData\Anaconda3\envs\keras\lib\site-packages\_pytest\config\__init__.py:1040
  C:\ProgramData\Anaconda3\envs\keras\lib\site-packages\_pytest\config\__init__.py:1040: PytestAssertRewriteWarning: Module already imported so cannot be rewritten: flaky
    self._mark_plugins_for_rewrite(hook)

-- Docs: https://docs.pytest.org/en/stable/warnings.html
===Flaky Test Report===

test_generator_enqueuer_fail_threads passed 1 out of the required 1 times. Success!
test_finite_generator_enqueuer_threads passed 1 out of the required 1 times. Success!

===End Flaky Test Report===
=========================== short test summary info ===========================
FAILED data_utils_test.py::test_data_utils - FileNotFoundError: [WinError 2] ...
ERROR data_utils_test.py::test_data_utils - AssertionError: assert not [local...
============== 1 failed, 12 passed, 1 warning, 1 error in 55.20s ==============
