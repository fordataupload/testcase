2020-10-04 16:59:07.492679: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library cudart64_100.dll
============================= test session starts =============================
platform win32 -- Python 3.6.12, pytest-6.0.2, py-1.9.0, pluggy-0.13.1
rootdir: C:\Users\mutation\Desktop\testcase\tests\keras\utils
plugins: flaky-3.7.0
collected 13 items

data_utils_test.py ....F.....F..                                         [100%]Using TensorFlow backend.


================================== FAILURES ===================================
________________________ test_ordered_enqueuer_threads ________________________

    def test_ordered_enqueuer_threads():
        enqueuer = OrderedEnqueuer(DummySequence([3, 10, 10, 3]),
                                   use_multiprocessing=False)
        enqueuer.start(3, 10)
        gen_output = enqueuer.get()
        acc = []
        for i in range(100):
            acc.append(next(gen_output)[0, 0, 0, 0])
>       assert acc == list(range(100)), ('Order was not keep in GeneratorEnqueuer '
                                         'with threads')
E       AssertionError: Order was not keep in GeneratorEnqueuer with threads
E       assert [0.0, 1.0, 2....4.0, 5.0, ...] == [0, 1, 2, 3, 4, 5, ...]
E         At index 90 diff: 450.0 != 90
E         Use -v to get the full diff

data_utils_test.py:279: AssertionError
__________________________ test_on_epoch_end_threads __________________________

    def test_on_epoch_end_threads():
        enqueuer = OrderedEnqueuer(DummySequence([3, 10, 10, 3]),
                                   use_multiprocessing=False)
        enqueuer.start(3, 10)
        gen_output = enqueuer.get()
        acc = []
        for i in range(100):
            acc.append(next(gen_output)[0, 0, 0, 0])
        acc = []
        for i in range(100):
            acc.append(next(gen_output)[0, 0, 0, 0])
>       assert acc == list([k * 5 for k in range(100)]), (
            'Order was not keep in GeneratorEnqueuer with processes')
E       AssertionError: Order was not keep in GeneratorEnqueuer with processes
E       assert [0.0, 5.0, 10....0, 25.0, ...] == [0, 5, 10, 15, 20, 25, ...]
E         At index 89 diff: 2225.0 != 445
E         Use -v to get the full diff

data_utils_test.py:378: AssertionError
---------------------------- Captured stderr call -----------------------------
Using TensorFlow backend.
Using TensorFlow backend.
Using TensorFlow backend.
Using TensorFlow backend.
Using TensorFlow backend.
Using TensorFlow backend.
============================== warnings summary ===============================
C:\ProgramData\Anaconda3\envs\keras\lib\site-packages\_pytest\config\__init__.py:1040
  C:\ProgramData\Anaconda3\envs\keras\lib\site-packages\_pytest\config\__init__.py:1040: PytestAssertRewriteWarning: Module already imported so cannot be rewritten: flaky
    self._mark_plugins_for_rewrite(hook)

-- Docs: https://docs.pytest.org/en/stable/warnings.html
===Flaky Test Report===

test_generator_enqueuer_fail_threads passed 1 out of the required 1 times. Success!
test_finite_generator_enqueuer_threads passed 1 out of the required 1 times. Success!

===End Flaky Test Report===
=========================== short test summary info ===========================
FAILED data_utils_test.py::test_ordered_enqueuer_threads - AssertionError: Or...
FAILED data_utils_test.py::test_on_epoch_end_threads - AssertionError: Order ...
================== 2 failed, 11 passed, 1 warning in 54.39s ===================
